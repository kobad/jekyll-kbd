---
layout: post
title: "Sensor Network"
date: 2017-04-19 23:00:00 +0900
toc: true
---

# Index

* TOC
{:toc}

# Sensor Network

## 位置測定
* Centroid測定
* DV-Hop測定
* APIT(Approximate Point-in-Triangulation Test)測定

### APIT(Approximate Point-in-Triangulation Test)測定
* ランドマークが位置情報を含んだビーコンを定期的に送信(広範囲の多くのノードに届く環境を理想とする)
* 各ノードは受信したビーコンから作成できる全ての３角形を導き出す
* 全３角形に対して、自分が内側にいるか・外側にいるか検証し、自分の位置を求める
  * PIT検証 - ノードが全ての方角に移動し、その時対象３つのランドマークと距離が離れる方角があればそのノードは外側にあると判断(これはセンサーネットワークには向いていないのでAPITを使う)
  * APIT - ランドマークからの電波強度ノード同士が交換し、そのランドマークがどちらのノードと近いかを判断. 近隣ノードに３台のランドマークとの距離が全て自分より遠いノードが存在する場合、外側にいると判断
    * In To Out Error - 内側にいるのに、外側と判断. 測定ノードが三角形のそばにいる時発生しやすい. ノードの密度が多くなると増加
    * Out To In Error - 外側にいるので、内側と判断. 近隣ノードの位置が不均等な時発生. ノードの数が多くなると減少
    * ノードを６から24台に増やすと、In To Out Errorは1->2%, Out To In Errorは14->4%. 結果増やした方がまだ良い

## データリンク層
物理的に接続されたノード間の通信.
データの送受信の時だけ通信デバイスを動作させ、それ以外は休止させておきたい(データを送受信していない時の通信デバイスの活動(アイドルリスニング)は送受信と同じくらい電力を使うから。)
そのため、MACプロトコルそのものを省電力にしたい。

### MACプロトコル (Media Access Control)
大きく２つに分けられる
* コンテンション方式 - CSMA/CA(Carrier Sense Multiple Access with Collision Avoidance)が有名. 不特定多数のクライアントが無数帯域を共有する時に良い。
  * 通信デバイスを休止できない(受信タイミングが明確でないから)
* スケジューリング方式 - TDMA(Time Division Multiple Access)が有名. 利用する無数周波数を短時間スロットで区切ってクライアントに割り振る
  * 送受信以外は通信デバイスを休止できる.
  * スロットを確保するには、ネットワーク内のノード数を把握しておく必要がある
  * スロットを細かく区切るため、制度の高い時刻同期が要求される(なんで)

どちらが良いとはいえない

紹介するもの
* LEACH(Low Energy Adaptive Clustering Hierarchy)
* S - MAC (Sensor MAC)

#### LEACH(Low Energy Adaptive Clustering Hierarchy)
TDMAをセンサーネットワークに適応
1. ネットワーク内でクラスタリングを行い、
2. 各ノードは自分のクラスタヘッドに対してTDMAで送信。各ノードが割り当てられた時間以外は休止できる
3. クラスタヘッドは離れたベースステーションに対して,各ノードから受信したデータをまとめて送信

各ノードがあらかじめネットワーク内で適切なクラスタヘッドの割合を知っていることが前提。少ないとノードとクラスタヘッド間の距離が遠いため通信の電力が多く必要。多いと、休止できるノードが減る。

各ノードは一定間隔でクラスタヘッドになるかどうか判断する
乱数k(0<k<1)がT(n)以下ならクラスタヘッドになる
```
T(n) = ...
```
各ノードが均等にクラスタヘッドとなるようになっている(集中してそのノードの消費電力が多くなるのを避ける)

クラスタヘッドはクラスタヘッド告知(CHA: Cluster Head Advertisement)をCSMA/CAでブロードキャスト

ノードは受信したCHAの中からもっとも電波強度の強いクラスタヘッドにCSMA/CAでクラスタ参加要求を送信.(一番近くて少ない電力で通信できるから)

クラスタヘッドは参加要求がきたメンバーにTDMAのスケジューリングを設定する
