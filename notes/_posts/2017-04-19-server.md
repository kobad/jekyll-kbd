---
layout: post
title: "Server Setting"
date: 2017-04-19 23:00:00 +0900
---

# Server Settings

On Ubuntu17.04

## Network settings
 * Edit - `/usr/lib/NetworkManager/conf.d/10-globally-managed-devices.conf`

```
[keyfile]
unmanaged-devices=*,except:type:ethernet,except:type:wifi,except:type:wwan
```

* Restart - `sudo service network-manager restart`

## Key binds

* Enable GNOME - `dconf reset /org/gnome/settings-daemon/plugins/keyboard/active`
* Swap ctrl caps - `dconf write /org/gnome/desktop/input-sources/xkb-options "['ctrl:swapcaps']"`

## IP Address
Edit - `/etc/network/interfaces`
```
auto lo
iface lo inet loopback

auto enp2s0(interface name by ifconfig)
iface enp2s0 inet static
address []
netmask []
gateway []
dns-nameservers []
```
* Restart - `sudo service networking restart`
## SSH

### Install[Server]
`sudo apt-get install openssh-server`
### Make RSA-Key[local]
`ssh-keygen -t rsa` on local -> `id_rsa, id_rsa.pub`
### Share Public key[local]
`scp .ssh/kserver/id_rsa.pub username@sever:~/`
### Register key[Server]
```
mkdir ~/.ssh
cat id_rsa.pub >> .ssh/authorized_keys
chmod 600 .ssh/authorized_keys
rm id_rsa.pub
```
### Settings[Server]
Edit - `/etc/ssh/sshd_config`
```
Port 12345

PermitRootLogin no
PasswordAuthentication no
```
### Settings[local]
* Edit - `~/.ssh/config`
```
Host 'name'
  HostName Host IP or Domain
  IdentityFile ~/.ssh/kserver/id_rsa
  Port 12345
```

## FireWall

### Confirm ufw is disabled
```
sudo ufw disable
sudo ufw status
Status: inactive
```
### Setup
```
sudo ufw default deny
sudo ufw allow 12345
sudo ufw allow 80
```
### Enable
```
sudo ufw enable

sudo ufw status
Status: active
To                         Action      From
--                         ------      ----
12345                      ALLOW       Anywhere
80                         ALLOW       Anywhere
12345                      ALLOW       Anywhere (v6)
80                         ALLOW       Anywhere (v6)
```
